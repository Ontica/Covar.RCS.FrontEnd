<div *ngIf="project.project.uid !== ''" class="card">

  <div class="card-header card-header-flat">
    <div class="card-title">
      {{viewTitle}}
      <div class="card-hint"><span i18n>Contract:</span> {{project.project.name}}</div>
    </div>
    <div class="card-header-options">
      <button type="button" class="btn disabled"
              (click)="search()" i18n>Search</button>
    </div>
  </div>

  <div class="card-body">

    <div *ngFor="let group of project.activities | groupActivitiesBy: groupBy ">

      <div class="activity-group-name">
        {{group.key}}
      </div>

      <div *ngFor="let activity of group.value"
           class="activity-row"
           [class.selected-activity]="isSelected(activity)">

        <div class="activity-container"
             [style.border-left-color]="timelineHelper.getTimelineColor(activity, activity.deadline, 'border')">

          <div class="activity-name">
            <a [class.completed-activity]="timelineHelper.isCompleted(activity)"
               [class.blink]="timelineHelper.getTimelineColor(activity, activity.deadline, 'title')"
               [style.color]="timelineHelper.getTimelineColor(activity, activity.deadline, 'title')"
               (click)="onSelectActivity(activity, true)">{{activity.name}}</a>
          </div>

          <div class="activity-status">

            <div class="activity-theme">
              {{activity.project.name}}: {{activity.theme || 'No theme'}}
              <br/>
              {{activity.parent.uid !== 'Undefined' ? activity.parent.name : ''}}
            </div>

            <div class="column"
                 [style.color]="timelineHelper.getTimelineColor(activity, activity.deadline)">
              <div i18n>Deadline:</div>
              <div>
                {{(activity.deadline | date:'dd/LLL/yyyy') || 'Unknown'}}
              </div>
            </div>

            <div *ngIf="timelineHelper.displayPlannedEndDate(activity)" class="column nowrap"
                 [style.color]="timelineHelper.getTimelineColor(activity, activity.plannedEndDate)">
              <div i18n>Planned End Date:</div>
              <div>
                {{activity.plannedEndDate | date:'dd/LLL/yyyy'}} &nbsp;
                <span>
                  {{timelineHelper.plannedEndDateVsDeadlineDays(activity)}}
                </span>
              </div>
            </div>

            <div *ngIf="timelineHelper.isCompleted(activity)" class="column nowrap">
              <div i18n>Actual End Date:</div>
              <div>
                {{activity.actualEndDate | date:'dd/LLL/yyyy'}} &nbsp;
                <span [style.color]="timelineHelper.getTimelineColor(activity, activity.actualEndDate)"
                      [innerHTML]="timelineHelper.actualEndDateVsDeadlineDays(activity) | safeHtml">
                </span>
              </div>
            </div>

            <div class="right-column expand">
                {{activity.responsible.uid !== 'Empty' ? activity.responsible.name : ''}}
            </div>

          </div>

        </div>

      </div>

    </div>

  </div>

</div>
